@using DevPortal.Web.Models.HomeViewModels
@model HomePageViewModel

<div class="row">
    <div class="col-lg-8">
        @if (!User.Identity.IsAuthenticated)
        {
            <vc:login-form model="null" />
        }
        else
        {
            Html.RenderPartial("_UserInfo");
        }

        <ul class="nav tab-content-style" id="tablist" role="tablist">
            <li id="news-tab"><a href="#news" class="active"  data-toggle="tab" role="tab">správičky</a></li>
            <li id="forum-tab"><a href="#forum" data-toggle="tab" role="tab">fórum</a></li>
            <li id="activity-tab"><a href="#activity" data-toggle="tab" role="tab">posledná aktivita</a></li>
        </ul>

        <div class="tab-content mt-30"  id="tablistContent">
            <section id="news" class="tab-pane fade show active" role="tabpanel" aria-labelledby="news-tab">
                @foreach (var newsItem in Model.LatestNews)
                {
                    <div class="btm-bord-content">
                        <div class="@(newsItem.CommentsCount > 0 ? "bubble" : "bubble bubble-gray")">
                            @newsItem.CommentsCount
                        </div>
                        <div>
                            <a asp-controller="News" asp-action="@nameof(NewsController.Detail)" asp-route-id="@newsItem.Id"
                               class="orange-text head-link">@newsItem.Title</a>
                            <p class="mb-2">@newsItem.Content.Truncate(120)</p>
                            <p class="gray-text font-s14 mb-0">
                                Posted on @newsItem.Created <span class="blue-text">@newsItem.CreatedBy</span>
                                <span class="blue-text pull-right">
                                    <a href="#" class="link mr-2">Share</a>
                                    <a href="#" class="link">Comments</a>
                                </span>
                            </p>
                        </div>
                    </div>
                }
            </section>
            <section id="forum" class="tab-pane fade" role="tabpanel" aria-labelledby="forum-tab">
                @Html.Partial("../Forum/_ForumThreadsList", Model.LatestForumThreads)               
            </section>
            <section id="activity" class="tab-pane fade" role="tabpanel" aria-labelledby="activity-tab">
                <h1>Forum</h1>
            </section>
        </div>
    </div>
    <div class="col-md-4">
        <vc:forum-overview />
        <vc:blogs-overview />
    </div>
</div>

<a href="~/fileupload.html">Test file upload</a>
